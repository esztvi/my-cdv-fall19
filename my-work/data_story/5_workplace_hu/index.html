<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Munkavállalás Külföldön</title>

  <!-- Please leave this following line here -->
  <!-- <script type="text/javascript" src="setup/setup.js"></script> -->
  <link rel="stylesheet" type="text/css" href="5.css">
  <!-- include the d3 library -->
  <script src="https://d3js.org/d3.v5.min.js"></script>


</head>

<body>
  <div class="topnav">
    <a href="../1_cover_hu/index.html">Főlap</a>
    <a href="../2_maps_hu/index.html">Térképek</a>
    <a href="../3_decline_hu/index.html">Népesség Csökkenése</a>
    <a href="../4_timeline_hu/index.html">Idősor</a>
    <a href="../5_workplace_hu/index.html"class='active-page'>Munkavállalás Külföldön</a>
    <a href="../6_religion_hu/index.html">Vallás</a>
    <a href="../7_outsidepopulation_hu/index.html">Külföldön Élő Magyarok</a>
    <a href="../8_populationcomp_hu/index.html">Népesség Összehasonlítás</a>
  </div>

<div id="container">
  <div id="d3id" ></div>
  <script>
  var models = [
    // {
    //     "industry": "Agriculture",
    //     "austria": 1064,
    //     "romania": 85509
    // },
    {
        "industry": "Forestry",
        "austria": null,
        "romania": 3377
    },
    {
        "industry": "Fishery",
        "austria": 783,
        "romania": 152
    },
    {
        "industry": "Mining",
        "austria": null,
        "romania": 8657
    },
    // {
    //     "industry": "Processing",
    //     "austria": null,
    //     "romania": 161835
    // },
    {
        "industry": "Energy",
        "austria": 1279,
        "romania": 10125
    },
    {
        "industry": "Building",
        "austria": 1502,
        "romania": 30457
    },
    {
        "industry": "Trade",
        "austria": 4187,
        "romania": 59203
    },
    {
        "industry": "Hotels & Restaurants",
        "austria": 20540,
        "romania": 9060
    },
    {
        "industry": "Transportation",
        "austria": 696,
        "romania": 14924
    },
    {
        "industry": "Post & Communications",
        "austria": 271,
        "romania": 5289
    },
    {
        "industry": "Financing and Insurance",
        "austria": 339,
        "romania": 3843
    },
    {
        "industry": "Real Estate",
        "austria": null,
        "romania": 8819
    },
    {
        "industry": "Public Administration",
        "austria": 940,
        "romania": 16205
    },
    {
        "industry": "Education",
        "austria": null,
        "romania": 27513
    },
    {
        "industry": "Health and Social Assistance",
        "austria": null,
        "romania": 22296
    },
    {
        "industry": "Services",
        "austria": 2647,
        "romania": 13592
    },
    {
        "industry": "Small Agricultural Activities",
        "austria": null,
        "romania": 1087
    },
    {
        "industry": "Organizations",
        "austria": 1717,
        "romania": 23
    },
    {
        "industry": "Undeclared",
        "austria": null,
        "romania": 29
    },
    {
        "industry": "Gas Stations",
        "austria": 846,
        "romania": null
    },
    {
        "industry": "Painting",
        "austria": 1417,
        "romania": null
    },
    {
        "industry": "Pastry Chef/Baker",
        "austria": 1111,
        "romania": null
    },
    {
        "industry": "Aparel",
        "austria": 827,
        "romania": null
    },
    {
        "industry": "Furniture Sales",
        "austria": 659,
        "romania": null
    },
    {
        "industry": "Roofing",
        "austria": 651,
        "romania": null
    },
    {
        "industry": "Work Force Exchange ",
        "austria": 5902,
        "romania": null
    }
  ];
  models = models.map(i => {
    i.industry = i.industry;
    return i;
  });

  var container = d3.select('#d3id'),
      width = 1425,
      height = 800,
      margin = {top: 30, right: 100, bottom: 30, left: 100},
      barPadding = .2,
      axisTicks = {qty: 5, outerSize: 0, dateFormat: '%m-%d'};

  var svg = container
     .append("svg")
     .attr("width", width)
     .attr("height", height)
     .append("g")
     .attr("transform", `translate(${margin.left},${margin.top})`);

  var xScale0 = d3.scaleBand().range([0, width - margin.left - margin.right]).padding(barPadding);
  var xScale1 = d3.scaleBand();
  var yScale = d3.scaleLinear().range([height - margin.top - margin.bottom, 0]);

  var xAxis = d3.axisBottom(xScale0).tickSizeOuter(axisTicks.outerSize);
  var yAxis = d3.axisLeft(yScale).ticks(axisTicks.qty).tickSizeOuter(axisTicks.outerSize);

  xScale0.domain(models.map(d => d.industry));
  xScale1.domain(['austria', 'romania']).range([0, xScale0.bandwidth()]);
  yScale.domain([0, d3.max(models, d => d.austria > d.romania ? d.austria : d.romania)]);

  var industry = svg.selectAll(".industry")
    .data(models)
    .enter().append("g")
    .attr("class", "industry")
    .attr("transform", d => `translate(${xScale0(d.industry)},0)`);

  /* Add field1 bars */
  industry.selectAll(".bar.austria")
    .data(d => [d])
    .enter()
    .append("rect")
    .attr("class", "bar austria")
  .style("fill","rgb(250,26,9)")
    .attr("x", d => xScale1('austria'))
    .attr("y", d => yScale(d.austria))
    .attr("width", xScale1.bandwidth())
    .attr("height", d => {
      return height - margin.top - margin.bottom - yScale(d.austria)
    });

  /* Add field2 bars */
  industry.selectAll(".bar.romania")
    .data(d => [d])
    .enter()
    .append("rect")
    .attr("class", "bar romania")
  .style("fill","rgb(9,130,71)")
    .attr("x", d => xScale1('romania'))
    .attr("y", d => yScale(d.romania))
    .attr("width", xScale1.bandwidth())
    .attr("height", d => {
      return height - margin.top - margin.bottom - yScale(d.romania)
    });

  // Add the X Axis
  svg.append("g")
     .attr("class", "x axis")
     .attr("transform", `translate(0,${height - margin.top - margin.bottom})`)
     .call(xAxis);

  // Add the Y Axis
  svg.append("g")
     .attr("class", "y axis")
     .call(yAxis);

  </script>

</div>
<div id= "words" style="align:right;position:absolute;top:7%;text-align: center;
    right:5%;font-size: 20px;color:whitesmoke;display: block;">
  <p><pre>Foglalkoztatási statisztikák:
    339000 magyar dolgozik az EU-ban Magyarországon kívül. 92000 magyar dolgozik Ausztriában. </pre>  </p>
  <p><pre>Munkanélküliség:
   MAGYARORSZÁG: 3,4% AUSZTRIA: 4,5% ROMÁNIA: 3,8%</pre>  </p>
  <p><pre>Átlagfizetés:
   MAGYARORSZÁG: 12978 €, AUSZTRIA: 47120 €, ROMÁNIA: 9,312 €</pre>  </p>
</div>
    <script type="text/javascript" src="5.js"></script>
</body>
</html>
